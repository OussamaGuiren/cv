/* Styles globaux */
:root {
  --ease-push: cubic-bezier(.25, .8, .25, 1);
  --dur-open: 900ms;
  --dur-close: 700ms;
  --bg-a: #0a1628;
  --bg-b: #1e2a55;
  --bg-c: #1e3a8a;
  --bg-d: #2563eb;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html,
body {
  height: 100%;
}

body {
  font-family: 'Nunito', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  background: linear-gradient(135deg, var(--bg-a) 0%, var(--bg-b) 46%, var(--bg-c) 62%, var(--bg-d) 100%);
  background-attachment: fixed;
  min-height: 100vh;
  color: #fff;
  overflow-x: hidden;
  overflow-y: auto;
}

.construction-banner {
  position: sticky;
  top: 0;
  z-index: 30;
  background: rgba(255, 255, 255, 0.12);
  backdrop-filter: blur(6px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.18);
  padding: 10px 16px;
  text-align: center;
  font-size: 13px;
  transition: transform var(--dur-close) var(--ease-push), opacity var(--dur-close) var(--ease-push);
}

body.about-open .construction-banner,
body.contact-open .construction-banner {
  transform: translateY(-60px);
  opacity: 0;
  transition-duration: var(--dur-open);
}

.stage {
  position: relative;
  width: 100vw;
}

/* Panneau 1: Principal */
.main-wrap {
  display: grid;
  place-items: center;
  transition: transform var(--dur-close) var(--ease-push);
  will-change: transform;
}

body.about-open .main-wrap {
  transform: translate3d(-100%, 0, 0);
  transition-duration: var(--dur-open);
}

.main-content {
  width: 100%;
  display: flex;
  flex-direction: column;
  justify-content: start;
  text-align: center;
  user-select: none;
  padding: 20px 0 40px;
}

.hero-section {
  padding: 20px 20px 10px;
}

.top-links {
  display: flex;
  justify-content: center;
  margin-bottom: 12px;
}

.ghost-link {
  background: none;
  border: none;
  color: #cfe2ff;
  font-weight: 800;
  font-size: 1.2rem;
  letter-spacing: .02em;
  padding: 6px 12px;
  border-radius: 999px;
  cursor: pointer;
  position: relative;
  /* transition: all 220ms ease; */
}

.ghost-link:hover {
  /* transform: translateY(-1px); */
  color: #fff;
  background: rgba(255, 255, 255, .06);
}

h1 {
  font-size: clamp(32px, 8vw, 56px);
  font-weight: 800;
  letter-spacing: -0.02em;
}

.title {
  font-size: clamp(16px, 4vw, 18px);
  opacity: 0.92;
  margin-top: 6px;
}

.links {
  display: flex;
  gap: 14px;
  flex-wrap: wrap;
  justify-content: center;
  margin-top: 24px;
}

.link-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 10px 20px;
  background: rgba(255, 255, 255, 0.16);
  border: 1px solid rgba(255, 255, 255, 0.28);
  border-radius: 40px;
  text-decoration: none;
  color: white;
  font-weight: 700;
  font-size: 13px;
  backdrop-filter: blur(10px);
  transition: all 200ms ease;
}

.link-btn:hover { background: rgba(255, 255, 255, 0.25); }
.link-btn svg { width: 16px; height: 16px; }

/* Section réalisations */
.achievements { width: 100%; padding: 25px 0; }
.section-title {
  font-size: 13px; text-transform: uppercase; letter-spacing: 0.1em;
  color: #a7c5f5; margin-bottom: 18px;
}
.gallery {
  display: flex; flex-direction: column; align-items: center; gap: 20px;
}
.project-card {
  width: 90%; max-width: 340px;
  background: linear-gradient(160deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.06));
  border: 1px solid rgba(255, 255, 255, 0.18);
  border-radius: 14px; overflow: hidden; display: flex; flex-direction: column; text-align: left;
  transition: transform 900ms ease, box-shadow 300ms ease;
}
.project-card:hover { 
    border: 1px solid rgba(255, 255, 255, 0.5);
    transition: transform 600ms ease, box-shadow 300ms ease;
}
.card-image {
  position: relative;
  width: 100%;
  /* Maintient un ratio 16:9 pour un rendu homogène, même avant d'avoir une image */
  aspect-ratio: 16 / 9;
  background: linear-gradient(135deg, var(--bg-c), var(--bg-b));
  background-size: cover; /* utile si vous utilisez une background-image */
  background-position: center;
  overflow: hidden;
  display: grid;
  place-items: center;
  color: rgba(255, 255, 255, 0.4);
  font-size: 12px;
}
/* L'image occupe toute la zone, rognée proprement */
.card-image img {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}
/* Fallback anciens navigateurs sans aspect-ratio */
@supports not (aspect-ratio: 1 / 1) {
  .card-image { height: 150px; }
}
.card-content { padding: 16px; flex-grow: 1; display: flex; flex-direction: column; }
.card-content h3 { font-size: 16px; margin-bottom: 6px; }
.card-content p { font-size: 13px; opacity: 0.8; line-height: 1.5; flex-grow: 1; }
.card-link { display: inline-block; color: #a7c5f5; text-decoration: none; font-weight: 700; font-size: 13px; margin-top: 12px; transition: color 200ms ease; }
.card-link:hover { color: #fff; }
.project-card.is-placeholder { background: transparent; border-style: dashed; align-items: center; justify-content: center; text-align: center; cursor: default; }
.project-card.is-placeholder:hover { transform: none; }
.project-card.is-placeholder h3 { font-size: 15px; }

/* Panneau “À propos” */
.about-panel {
  position: fixed; inset: 0; z-index: 100; display: grid; grid-template-rows: auto 1fr;
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.06), rgba(255, 255, 255, 0.02)), rgba(10, 22, 40, 0.92);
  backdrop-filter: blur(12px);
  transform: translate3d(100%, 0, 0); transition: transform var(--dur-close) var(--ease-push); will-change: transform; pointer-events: none; box-shadow: -12px 0 40px rgba(0, 0, 0, 0.35);
}
body.about-open .about-panel { transform: translate3d(0, 0, 0); transition-duration: var(--dur-open); pointer-events: auto; }
.panel-top { display: flex; align-items: center; justify-content: space-between; padding: 14px 18px; border-bottom: 1px solid rgba(255, 255, 255, 0.12); }
.panel-title { font-size: 16px; font-weight: 800; letter-spacing: .04em; opacity: .9; }
.panel-close { background: rgba(255, 255, 255, 0.1); color: #fff; border: 1px solid rgba(255, 255, 255, 0.24); border-radius: 24px; padding: 8px 14px; font-weight: 700; cursor: pointer; transition: all 220ms ease; }
.panel-close:hover { transform: translateY(-1px); }
.panel-content { position: relative; overflow: hidden; }
.panel-scroll { position: absolute; inset: 0; overflow-y: auto; padding: 28px 20px 40px; }
.about-content { max-width: 880px; margin: 0 auto; }
.about-content>* { opacity: 0; transform: translateY(12px); transition: transform 600ms var(--ease-push), opacity 500ms var(--ease-push); }
body.about-open .about-content>* { opacity: 1; transform: translateY(0); }
.about-content h2 { font-size: clamp(24px, 4vw, 36px); margin: 8px 0 16px; font-weight: 800; color: #cfe2ff; }
.about-content p { font-size: 16px; line-height: 1.85; margin: 10px 0; }
.about-content>*:nth-child(1) { transition-delay: 200ms; }
.about-content>*:nth-child(2) { transition-delay: 260ms; }
.about-content>*:nth-child(3) { transition-delay: 320ms; }
.about-content>*:nth-child(4) { transition-delay: 380ms; }
.about-content>*:nth-child(5) { transition-delay: 440ms; }
.about-content>*:nth-child(6) { transition-delay: 500ms; }

/* Panneau de Contact (gauche) */
.contact-panel {
  position: fixed; 
  inset: 0; 
  z-index: 100; 
  background: transparent; 
  transform: translate3d(-100%, 0, 0);
  transition: transform var(--dur-close) var(--ease-push); 
  will-change: transform; 
  pointer-events: none;
}
body.contact-open .contact-panel { transform: translate3d(0, 0, 0); transition-duration: var(--dur-open); pointer-events: auto; }
.contact-scrim {
  position: absolute; inset: 0; background: rgba(10, 22, 40, 0); opacity: 0; transition: opacity var(--dur-close) ease; z-index: 1;
}
.contact-inner {
  position: absolute; top: 0; left: 0; height: 100%; width: clamp(320px, 90vw, 480px);
  background: rgba(10, 22, 40, 1);
  display: grid; grid-template-rows: auto 1fr; box-shadow: 6px 0 32px rgba(0, 0, 0, 0.3); z-index: 2;
}

#contactForm { padding: 20px; display: flex; flex-direction: column; gap: 16px; overflow-y: auto; }
.form-group { display: flex; flex-direction: column; gap: 6px; }
.form-group label { font-size: 13px; font-weight: 700; color: #a7c5f5; }
.form-group input,
.form-group select,
.form-group textarea {
  background: rgba(0, 0, 0, 0.2); border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 6px; padding: 12px; font-size: 15px; color: #fff; font-family: inherit;
  transition: border-color 200ms ease, box-shadow 200ms ease;
}
.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus { outline: none; border-color: #60a5fa; }
.form-group textarea { min-height: 100px; resize: vertical; }

.file-upload-wrapper { position: relative; }

#missionType { background-color: #0a1628; }

#fileName {
  background: rgba(0, 0, 0, 0.2); border: 1px dashed rgba(255, 255, 255, 0.4);
  border-radius: 6px; padding: 12px; font-size: 14px; color: rgba(255, 255, 255, 0.6); text-align: center; cursor: pointer;
}

#jobDescriptionFile { display: none; }

/* Drag & drop states */
.file-upload-wrapper.drag-over #fileName {
  border-color: #60a5fa;
  background: rgba(96, 165, 250, 0.12);
  color: #e6f0ff;
}

/* Focus visible for accessibility */
#fileName:focus-visible {
  outline: 2px solid #60a5fa;
  outline-offset: 2px;
}

/* File chip inside the placeholder when a file is selected */
#fileName .file-chip { display: inline-flex; align-items: center; gap: 8px; }
#fileName .file-chip .file-meta { opacity: .85; font-size: 13px; }
#fileName .file-chip .remove-file {
  appearance: none; border: 1px solid rgba(255, 255, 255, 0.3); color: #fff;
  background: rgba(255,255,255,0.12); border-radius: 14px; padding: 4px 8px;
  font-size: 12px; cursor: pointer; transition: background 160ms ease, transform 160ms ease;
}
#fileName .file-chip .remove-file:hover { background: rgba(255,255,255,0.2); transform: translateY(-1px); }

#submitBtn {
  margin-top: 8px; padding: 14px; background: #2563eb; border: none; border-radius: 6px; color: #fff; font-weight: 700; font-size: 16px; cursor: pointer; transition: background 200ms ease;
}
#submitBtn:hover { background: #1d4ed8; }

/* Etats et messages d'erreur/validation */
.hint { color:#cbd5e1; font-size:.85rem; margin-top:4px; }
.error { color:#ff8a80; font-size:.9rem; margin-top:4px; min-height:1.2em; }
.form-group.touched input:invalid,
.form-group.touched select:invalid,
.form-group.touched textarea:invalid,
form.was-validated .form-group input:invalid,
form.was-validated .form-group select:invalid,
form.was-validated .form-group textarea:invalid { border-color:#ff8a80; background: rgba(255, 138, 128, 0.08); }

.form-group.touched input:valid,
.form-group.touched select:valid,
.form-group.touched textarea:valid,
form.was-validated .form-group input:valid,
form.was-validated .form-group select:valid,
form.was-validated .form-group textarea:valid { border-color:#1e2a55; }
button[disabled] { opacity:.6; cursor:not-allowed; }

@media (min-width: 768px) {
  body { overflow: hidden; }
  .main-content { justify-content: center; padding: 0; }
  .hero-section { padding: 20px 20px 10px; }
  .achievements { margin-top: 2vh; }
  .gallery { flex-direction: row; justify-content: center; padding: 0 40px; overflow-x: auto; scroll-snap-type: x mandatory; }
  .project-card { width: auto; flex: 0 0 clamp(280px, 22vw, 340px); max-width: none; }
}

@media (prefers-reduced-motion: reduce) {
  body { overflow: auto !important; }
  .construction-banner,
  .main-wrap,
  .about-panel,
  .contact-panel,
  .about-content>* { transition: none !important; }
}

/* Toast notifications */
.toast-container {
  position: fixed;
  z-index: 9999;
  bottom: 16px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  flex-direction: column;
  gap: 10px;
  width: min(92vw, 420px);
  pointer-events: none; /* clicks pass through except on toast itself */
}
.toast {
  pointer-events: auto;
  display: grid;
  grid-template-columns: 24px 1fr auto;
  align-items: center;
  gap: 10px;
  padding: 12px 14px;
  border-radius: 10px;
  /* Fond plus "flashy" mais cohérent avec le thème */
  background:
    linear-gradient(135deg, rgba(37, 99, 235, 0.28), rgba(30, 58, 138, 0.28)),
    linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.04)),
    rgba(10,22,40,0.88);
  border: 1px solid rgba(255,255,255,0.18);
  box-shadow: 0 6px 22px rgba(0,0,0,0.35);
  color: #eef4ff;
  animation: toast-in 240ms var(--ease-push);
}
.toast-icon { width: 24px; height: 24px; display: grid; place-items: center; font-size: 16px; }
.toast-message { font-size: 14px; line-height: 1.45; }
.toast-close {
  background: rgba(255,255,255,0.12);
  color: #fff;
  border: 1px solid rgba(255,255,255,0.28);
  border-radius: 8px;
  padding: 4px 8px;
  font-size: 12px;
  cursor: pointer;
}

@keyframes toast-in { from { opacity: 0; transform: translateY(6px); } to { opacity: 1; transform: translateY(0); } }
@keyframes toast-out { to { opacity: 0; transform: translateY(8px); } }
